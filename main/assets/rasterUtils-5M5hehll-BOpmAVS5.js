import{gk as h,lM as U,eR as p,jq as _,j9 as T,gl as E,oE as a,gx as C,oD as O}from"./main-BJW1_IOd.js";function w(e,r,n="nearest",s=!1){const i=!(s&&r.pixelType==="u8"),o=i?p.FLOAT:p.UNSIGNED_BYTE,u=r.pixels==null||r.pixels.length===0?null:i?r.getAsRGBAFloat():r.getAsRGBA(),f=e.capabilities.textureFloatLinear,t=new h;return t.width=r.width,t.height=r.height,t.internalFormat=i?U.RGBA32F:C.RGBA,t.samplingMode=!f||n!=="bilinear"&&n!=="cubic"?_.NEAREST:_.LINEAR,t.dataType=o,t.wrapMode=T.CLAMP_TO_EDGE,new E(e,t,u)}function M(e,r){const{spacing:n,offsets:s,coefficients:i,size:[o,u]}=r,f=n[0]>1,t=new h;t.width=f?4*o:o,t.height=u,t.internalFormat=U.RGBA32F,t.dataType=p.FLOAT,t.samplingMode=_.NEAREST,t.wrapMode=T.CLAMP_TO_EDGE;const m=new Float32Array(f?o*u*16:2*s.length);if(f&&i!=null)for(let c=0,l=0;c<i.length;c++)m[l++]=i[c],c%3==2&&(m[l++]=1);else for(let c=0;c<u;c++)for(let l=0;l<o;l++){const g=4*(c*o+l),A=2*(l*u+c);m[g]=s[A],m[g+1]=s[A+1],m[g+3]=s[A]===-1?0:1}return new E(e,t,m)}function x(e,r){const n=new h;return n.internalFormat=C.RGBA,n.width=r.length/4,n.height=1,n.samplingMode=_.NEAREST,n.wrapMode=T.CLAMP_TO_EDGE,new E(e,n,r)}function L(e,r,n,s=1,i=!0){return{u_flipY:i,u_applyTransform:!!e,u_opacity:s,u_transformSpacing:e?e.spacing:O,u_transformGridSize:e?e.size:O,u_targetImageSize:r,u_srcImageSize:n}}function F(e,r){return{u_colormapOffset:r||0,u_colormapMaxIndex:e?e.length/4-1:0}}function V(e,r){return{u_scale:e,u_offset:r}}function k(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function G(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function v(e,r){const n=e.gl,s=r.glName,i=new Map;if(s==null)return i;const o=n.getProgramParameter(s,n.ACTIVE_UNIFORMS);let u;for(let f=0;f<o;f++)u=n.getActiveUniform(s,f),u&&i.set(u.name,{location:n.getUniformLocation(s,u.name),info:u});return i}function B(e,r,n){Object.keys(n).forEach(s=>{const i=r.get(s)||r.get(s+"[0]");i&&b(e,s,n[s],i)})}function N(e,r,n,s){n.length===s.length&&(s.some(i=>i==null)||n.some(i=>i==null)||n.forEach((i,o)=>{r.setUniform1i(i,o),e.bindTexture(s[o],o)}))}function b(e,r,n,s){if(s===null||n==null)return!1;const{info:i}=s;switch(i.type){case a.FLOAT:i.size>1?e.setUniform1fv(r,n):e.setUniform1f(r,n);break;case a.FLOAT_VEC2:e.setUniform2fv(r,n);break;case a.FLOAT_VEC3:e.setUniform3fv(r,n);break;case a.FLOAT_VEC4:e.setUniform4fv(r,n);break;case a.FLOAT_MAT3:e.setUniformMatrix3fv(r,n);break;case a.FLOAT_MAT4:e.setUniformMatrix4fv(r,n);break;case a.INT:i.size>1?e.setUniform1iv(r,n):e.setUniform1i(r,n);break;case a.BOOL:e.setUniform1i(r,n?1:0);break;case a.INT_VEC2:case a.BOOL_VEC2:e.setUniform2iv(r,n);break;case a.INT_VEC3:case a.BOOL_VEC3:e.setUniform3iv(r,n);break;case a.INT_VEC4:case a.BOOL_VEC4:e.setUniform4iv(r,n);break;default:return!1}return!0}export{V as F,v as G,k as L,x as M,L as U,G as V,M as b,B as k,N as v,w,F as x};
