import{p0 as w,p1 as E,pz as y,p4 as T,p5 as _,pf as h,q5 as v,ph as A,p2 as i,pi as M,p8 as x,pk as P,pb as R,pp as D,pd as C}from"./main-BJW1_IOd.js";const L={en:{"panguard.instructions":"Use two fingers to pan the map"},fr:{"panguard.instructions":"Utilisez deux doigts pour faire un panoramique de la carte"}},S={class:"pg-label"},$=w({__name:"map-panguard",setup(m){const{t:r}=T(),s=_("iApi"),a=h(),u=h(-1),o=v([]),p=v([]);A(()=>{c(),p.push(s.event.on(i.MAP_CREATED,()=>{c()})),p.push(s.event.on(i.MAP_DESTROYED,()=>{o.forEach(e=>e.remove())})),p.push(s.event.on(i.MAP_REFRESH_START,()=>{o.forEach(e=>e.remove())})),p.push(s.event.on(i.MAP_REFRESH_END,()=>{c()}))}),M(()=>{p.forEach(e=>s.event.off(e)),o.forEach(e=>e.remove())});const c=()=>{const e=new Map;s.geo.map.viewPromise.then(()=>{o.push(s.geo.map.esriView.on("pointer-down",t=>{t.pointerType==="touch"&&e.set(t.pointerId,{x:t.x,y:t.y})})),o.push(s.geo.map.esriView.on(["pointer-up","pointer-leave"],t=>{t.pointerType==="touch"&&window.setTimeout(()=>{e.delete(t.pointerId)},200)})),o.push(s.geo.map.esriView.on("pointer-move",t=>{const{pointerId:g,pointerType:f,x:d,y:l}=t,n=e.get(g);if(!n||f!=="touch"||e.size!==1){a.value.classList.remove("pg-active");return}Math.sqrt(Math.pow(d-n.x,2)+Math.pow(l-n.y,2))<20||(a.value.classList.add("pg-active"),u.value!==-1&&clearTimeout(u.value),u.value=window.setTimeout(()=>{a.value.classList.remove("pg-active")},2e3),window.scrollBy(n.x-d,n.y-l))}))})};return(e,t)=>(x(),P("div",{class:"pg",ref_key:"panGuard",ref:a},[R("p",S,D(C(r)("panguard.instructions")),1)],512))}}),I=E($,[["__scopeId","data-v-e91f9000"]]);class q extends y{added(){Object.entries(L).forEach(a=>this.$iApi.$i18n.mergeLocaleMessage(...a));const{destroy:r,el:s}=this.mount(I,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(s.childNodes[0]),this.removed=()=>{r()}}}export{q as default};
